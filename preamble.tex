\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage[hidelinks]{hyperref}
\usepackage{lipsum}
\usepackage{indentfirst}
\usepackage{color}
\usepackage{url}
\usepackage{atbegshi}
\usepackage{tikz}
\usepackage{enumitem}
\usepackage{microtype}
\usepackage{etoolbox}
\usepackage{longtable}
\usepackage{nomencl}
\usepackage{placeins}
\usepackage{adjustbox}

% Scientific packages
\usepackage{siunitx}
\usepackage[version=3]{mhchem}
\usepackage{nth}
\usepackage{algorithm, algpseudocode}
\usepackage{mathtools}
\usepackage{authblk}
\usepackage{pgfplotstable}

% High quality graphics
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{groupplots}
\usepgfplotslibrary{fillbetween}
\usetikzlibrary{calc}
\usetikzlibrary{shapes,arrows}

\usetikzlibrary{external}
\tikzexternalize[mode=list and make]

% No space between paragraphs
\abnormalparskip{0pt}

% Fonts
\usepackage{mathptmx} % math
\usepackage{sourcesanspro} % sans-serif
\usepackage{charter} % serif

% Subfloats
\newsubfloat{figure} % Subfigures
\newsubfloat{table} % Subtables

% Date
\usepackage{datetime}
\newdateformat{titlepagedate}{\monthname[\THEMONTH] \THEYEAR}

% Margins
\setlrmarginsandblock{2.9cm}{2cm}{*}
\setulmarginsandblock{2.5cm}{2.5cm}{*}
\checkandfixthelayout

% Subsection numbering
\setsecnumdepth{subsubsection}

% Chapter style
\makechapterstyle{chstyle}{%
	\renewcommand\chapnamefont{%
		\normalfont\Huge\sffamily
	}
	\renewcommand\chaptitlefont{%
		\normalfont\HUGE\sffamily\bfseries
	}
	\renewcommand\printchapternum{\chapnamefont\Huge\space\thechapter}
}
\chapterstyle{chstyle}

% Publications chapter style
\makechapterstyle{publicationchstyle}{%
	\renewcommand\chapnamefont{%
		\normalfont\Huge\sffamily
	}
	\renewcommand\chaptitlefont{%
		\normalfont\HUGE\sffamily\bfseries
	}
	\renewcommand\printchapternum{%
		\chapnamefont\Huge\space\thechapter
	}
	\renewcommand{\chapterheadstart}{}
}

% Headers and footers
% Normal page style
\makepagestyle{hfpage}
\makeevenhead{hfpage}{\thepage}{}{\leftmark}
\makeoddhead{hfpage}{\rightmark}{}{\thepage}
\makeevenfoot{hfpage}{}{}{}
\makeoddfoot{hfpage}{}{}{}
\makeheadrule{hfpage}{\textwidth}{\normalrulethickness}
\makepsmarks{hfpage}{%
	\nouppercaseheads
}
\pagestyle{hfpage}
\aliaspagestyle{chapter}{empty}

% Bibliography (uncomment your preferred style)
% Author-year
\usepackage[style=authoryear, backend=biber, maxcitenames=2, maxbibnames=99, firstinits=true, uniquename=false, uniquelist=false, url=false, doi=false, isbn=false, dashed=false, natbib=true]{biblatex}
% Numeric (default)
%\usepackage[backend=biber, sorting=none, maxcitenames=2, maxbibnames=99, firstinits=true, uniquename=false, uniquelist=false, url=false, doi=false, isbn=false, natbib=true]{biblatex}

% Print your publication
\newcommand{\printpublication}[1]{\AtNextCite{\defcounter{maxnames}{99}}\myprintpublication{#1}}
\DeclareCiteCommand{\myprintpublication}
{%
	\boolfalse{citetracker}%
	\boolfalse{pagetracker}%
	\DeclareNameAlias{labelname}{first-last}%
	\usebibmacro{prenote}}
{\ifciteindex
	{\indexnames{labelname}}
	{}%
	\printnames{labelname}. \printfield{title}. %
	\ifentrytype{inproceedings}{\printfield{booktitle}}{}%
	\ifentrytype{article}{\printfield{journaltitle}}{}, \printfield{year}.}
{\multicitedelim}
{\usebibmacro{postnote}}

% Remove In: from journal articles
\renewbibmacro{in:}{%
	\ifentrytype{article}{}{%
		\ifentrytype{inproceedings}{}{%
			\printtext{\bibstring{in}\intitlepunct}
		}
	}
}

% Bib resource file
\addbibresource{bib/library.bib}

% Change table of contents name
% Appendix name is changed to Papers
\addto\captionsenglish{% Replace "english" with the language you use
	\renewcommand\contentsname{Table of Contents}%
	\renewcommand\appendixname{Paper}
	\renewcommand\appendixpagename{Papers}
}
\renewcommand*{\cftappendixname}{Paper\space} % ToC appendix name

% Bold caption name
\captionnamefont{\bfseries\small}
\captiontitlefont{\small}

% Algorithm settings
\algtext*{EndWhile}% Remove "end while" text
\algtext*{EndIf}% Remove "end if" text
\algtext*{EndFor}% Remove "end for" text
\algtext*{EndFunction}% Remove "end for" text

% Row number counter
\preto\tabular{\setcounter{magicrownumbers}{0}}
\preto\longtable{\setcounter{magicrownumbers}{0}}
\newcounter{magicrownumbers}
\newcommand\rownumber{\stepcounter{magicrownumbers}\arabic{magicrownumbers}}

% Black and white graphics
\newbool{bBlackWhite}
\boolfalse{bBlackWhite}

% Publication folder
\newcommand{\folder}{}